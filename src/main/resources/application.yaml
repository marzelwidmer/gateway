spring:
  cloud:
    gateway:
      routes:
        - id: service_route
          uri: http://localhost:8081
          predicates:
            - Path=/customer/**
            - After=2019-08-12T14:33:47.789-07:00[CET]
          filters:
            - RewritePath=customer(?<segment>/?.*), $\{segment}
        - id: openshift_route
          predicates:
            - Path=/myhelsana/services/medicheck/**
#            - Between=2019-08-12T12:33:47.789-07:00[CET], 2019-08-12T17:45:47.789-07:00[CET]
            - Between=2019-08-12T14:33:47.789-07:00[CET], 2019-09-12T14:33:47.789-07:00[CET]
#            - Between=2019-08-12T10:57:47.789-07:00[Europe/Zurich], 2019-09-12T15:00:00.789-07:00[Europe/Zurich]
          filters:
            - StripPrefix=3
            - RewritePath=/service(?<segment>/?.*), $\{segment}
            - name: Logging
              args:
                baseMessage: My Custom Message
                preLogger: true
                postLogger: true
          uri: "http://medicheck-service-development.apps.c3smonkey.ch"

management:
  endpoints:
    web:
      exposure:
        include: "*"
    restart:
      enabled: true
  info:
    git:
      mode: full


logging:
  level:
    org.springframework.cloud.gateway: DEBUG
    reactor.netty.http.client: DEBUG
  pattern:
    console: "%clr(%d{yy-MM-dd E HH:mm:ss.SSS}){blue} %clr(%-5p) %clr(${PID}){faint}
          %clr([${spring.zipkin.service.name:${spring.application.name:-}},){magenta}%clr(%X{X-B3-TraceId:-},){yellow}%clr(%X{X-B3-SpanId:-},){cyan}%clr(,%X{X-Span-Export:-}]){blue}%clr([%8.15t]){cyan}
          %clr(%-40.40logger{0}){blue} %clr(:){red} %clr(%m
          ){faint}%n"

